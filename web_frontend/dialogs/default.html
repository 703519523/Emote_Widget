<!-- 
  这是一个独立的对话框主题文件。
  它只包含<style>和对话框本身的HTML结构。
  它将被动态加载并注入到主HTML页面中。
-->
<style id="dialog-theme-style">
    /* 1. 核心动画: 'shake' */
    @keyframes shake {
            0%, 100% { transform: translate(0px, 0px) rotate(0deg); }
            2% { transform: translate(0.5px, -1.5px) rotate(-0.5deg); }
            4% { transform: translate(0.5px, 1.5px) rotate(1.5deg); }
            6% { transform: translate(1.5px, 1.5px) rotate(1.5deg); }
            8% { transform: translate(2.5px, 1.5px) rotate(0.5deg); }
            10% { transform: translate(0.5px, 2.5px) rotate(0.5deg); }
            12% { transform: translate(1.5px, 1.5px) rotate(0.5deg); }
            14% { transform: translate(0.5px, 0.5px) rotate(0.5deg); }
            16% { transform: translate(-1.5px, -0.5px) rotate(1.5deg); }
            18% { transform: translate(0.5px, 0.5px) rotate(1.5deg); }
            20% { transform: translate(2.5px, 2.5px) rotate(1.5deg); }
            22% { transform: translate(0.5px, -1.5px) rotate(1.5deg); }
            24% { transform: translate(-1.5px, 1.5px) rotate(-0.5deg); }
            26% { transform: translate(1.5px, 0.5px) rotate(1.5deg); }
            28% { transform: translate(-0.5px, -0.5px) rotate(-0.5deg); }
            30% { transform: translate(1.5px, -0.5px) rotate(-0.5deg); }
            32% { transform: translate(2.5px, -1.5px) rotate(1.5deg); }
            34% { transform: translate(2.5px, 2.5px) rotate(-0.5deg); }
            36% { transform: translate(0.5px, -1.5px) rotate(0.5deg); }
            38% { transform: translate(2.5px, -0.5px) rotate(-0.5deg); }
            40% { transform: translate(-0.5px, 2.5px) rotate(0.5deg); }
            42% { transform: translate(-1.5px, 2.5px) rotate(0.5deg); }
            44% { transform: translate(-1.5px, 1.5px) rotate(0.5deg); }
            46% { transform: translate(1.5px, -0.5px) rotate(-0.5deg); }
            48% { transform: translate(2.5px, -0.5px) rotate(0.5deg); }
            50% { transform: translate(-1.5px, 1.5px) rotate(0.5deg); }
            52% { transform: translate(-0.5px, 1.5px) rotate(0.5deg); }
            54% { transform: translate(-1.5px, 1.5px) rotate(0.5deg); }
            56% { transform: translate(0.5px, 2.5px) rotate(1.5deg); }
            58% { transform: translate(2.5px, 2.5px) rotate(0.5deg); }
            60% { transform: translate(2.5px, -1.5px) rotate(1.5deg); }
            62% { transform: translate(-1.5px, 0.5px) rotate(1.5deg); }
            64% { transform: translate(-1.5px, 1.5px) rotate(1.5deg); }
            66% { transform: translate(0.5px, 2.5px) rotate(1.5deg); }
            68% { transform: translate(2.5px, -1.5px) rotate(1.5deg); }
            70% { transform: translate(2.5px, 2.5px) rotate(0.5deg); }
            72% { transform: translate(-0.5px, -1.5px) rotate(1.5deg); }
            74% { transform: translate(-1.5px, 2.5px) rotate(1.5deg); }
            76% { transform: translate(-1.5px, 2.5px) rotate(1.5deg); }
            78% { transform: translate(-1.5px, 2.5px) rotate(0.5deg); }
            80% { transform: translate(-1.5px, 0.5px) rotate(-0.5deg); }
            82% { transform: translate(-1.5px, 0.5px) rotate(-0.5deg); }
            84% { transform: translate(-0.5px, 0.5px) rotate(1.5deg); }
            86% { transform: translate(2.5px, 1.5px) rotate(0.5deg); }
            88% { transform: translate(-1.5px, 0.5px) rotate(1.5deg); }
            90% { transform: translate(-1.5px, -0.5px) rotate(-0.5deg); }
            92% { transform: translate(-1.5px, -1.5px) rotate(1.5deg); }
            94% { transform: translate(0.5px, 0.5px) rotate(-0.5deg); }
            96% { transform: translate(2.5px, -0.5px) rotate(-0.5deg); }
            98% { transform: translate(-1.5px, -1.5px) rotate(-0.5deg); }
        }

        /* ================================== */
        /* 2. 对话框容器 */
        /* ================================== */
        .dialog-container {
            position: absolute;
            margin-top: 50px;
            left: 50%;      /* 初始水平居中 */
            top: 50%;       /* 初始垂直位置，可由 JS 偏移 */
            transform: translate(-50%, -100%) scale(1); /* 锚点在底部中心 */
            
            width: max-content;
            max-width: 600px;

            pointer-events: none;
            z-index: 10;

            /* 平滑过渡位置和缩放 */
            transition: left 0.3s cubic-bezier(.4,0,.2,1),
                        top 0.3s cubic-bezier(.4,0,.2,1),
                        transform 0.3s cubic-bezier(.4,0,.2,1),
                        opacity 0.4s;

            /* 初始状态隐藏 */
            opacity: 0;
        }

        /* 显示状态 */
        .dialog-container.visible {
            opacity: 1;
        }

        /* ================================== */
        /* 3. 对话框主体 (关键修改) */
        /* ================================== */
        .dialog-box {
            position: relative;
            animation: shake 50s ease-in-out infinite;

            /* ✅ 用 max-height 做过渡 */
            max-height: 0;               /* 初始收缩 */
            overflow: hidden;
            transition: max-height 0.4s cubic-bezier(.4,0,.2,1),
                    opacity 0.3s ease,
                    padding-top 0.3s ease,     /* 新增或确认有 */
                    padding-bottom 0.3s ease,  /* 新增或确认有 */
                    border-width 0.3s ease; /* 如果使用了方法一过渡边框宽度 */
            opacity: 0;
            padding: 0 20px;             /* 初始 padding 收缩上下方向为 0 */
            box-sizing: border-box;      /* 确保 padding 和 border 不会增加元素在 max-height 上的实际占用 */

            background-color: rgba(236, 217, 188, 0.9);
            border: 1px solid rgba(224, 186, 140, 0.62);
            border-radius: 12px;
            box-shadow: rgba(191, 158, 118, 0.2) 0px 3px 15px 2px;

            color: #493b2a;
            font-size: 18px;
            font-weight: 500;
            line-height: 24px;
            word-break: break-all;
            text-align: center;
        }

        /* 展开状态 */
        .dialog-box.open {
            opacity: 1;
            max-height: 10000px;          /* 设定一个足够大的最大值，实际高度会由内容和 scrollHeight 决定 */
            border-width: 0px; /* 如果使用了方法一过渡边框宽度 */
        }

        /* 内部内容容器 */
        .dialog-content-wrapper {
            overflow: hidden;            /* 防止内容溢出 */
        }

        /* #dialog-text 现在是容纳多行的父容器 */
        .dialog-box p#dialog-text {
            margin: 0;
            padding: 0;
            font-family: sans-serif;
            font-size: 20px; /* 基础字体大小 */
            color: #333;
            text-align: center;
            perspective: 400px;
            display: block; /* 确保它作为一个块级容器 */
        }

        /* 新增的行容器样式 */
        .dialog-box .dialog-line {
            display: block; /* 确保每行独立占据空间 */
            margin: 0;
            padding: 0;
            line-height: inherit; /* 继承父容器的行高 */
            /* text-align: center; 这通常会继承自 #dialog-text */
        }

        /* 单字符动画 (现在针对 .dialog-line 内部的 .char) */
        .dialog-box .dialog-line .char {
            display: inline-block;
            opacity: 0;
            transform: translateY(-20px) rotateX(90deg);
            transition: opacity 0.5s ease, transform 0.5s ease;
        }


</style>


<!-- 这是对话框的 HTML 结构 -->
<div id="dialog-theme-html">
    <div class="dialog-container">
        <div class="dialog-box">
            <div class="dialog-content-wrapper">
                <p id="dialog-text"></p>
            </div>
        </div>
    </div>
</div>